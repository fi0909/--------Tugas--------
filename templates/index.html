<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rumah Jogja Monitor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Header/Navigation -->
    <header class="navbar">
        <div class="navbar-container">
            <div class="navbar-left">
                <h1 class="navbar-logo">
                    <span class="logo-icon">ğŸ </span>
                    Rumah Jogja Monitor
                </h1>
            </div>
            <div class="navbar-center">
                <div class="clock" id="clock">00:00:00</div>
            </div>
            <div class="navbar-right">
                <span class="status-badge" id="statusBadge">
                    <span class="status-dot kosong"></span>
                    <span id="statusText">Kosong</span>
                </span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Notifikasi -->
        <section class="notifications-section">
            <div class="section-title">
                <span class="title-icon">ğŸ””</span>
                <span>Notifikasi</span>
            </div>
            <div class="notifications-container" id="notificationsContainer">
                <p class="empty-state">Tidak ada notifikasi</p>
            </div>
        </section>

        <!-- Ringkasan Status -->
        <section class="status-section">
            <div class="section-title">
                <span class="title-icon">ğŸ“Š</span>
                <span>Ringkasan Status</span>
            </div>
            <div class="status-grid">
                <div class="status-item">
                    <label>Status Rumah</label>
                    <!-- Remove manual toggle buttons, status auto-detected from MQTT -->
                    <div class="status-value" id="houseSummary">Kosong</div>
                    <div class="status-placeholder">Auto-deteksi PIR</div>
                </div>
                <div class="status-item">
                    <label>Lampu Menyala</label>
                    <div class="status-value" id="lightsCount">0/5</div>
                    <div class="status-placeholder">Ruangan</div>
                </div>
                <div class="status-item">
                    <label>Perangkat Aktif</label>
                    <div class="status-value" id="devicesCount">0/3</div>
                    <div class="status-placeholder">Perangkat</div>
                </div>
            </div>
        </section>

        <!-- Kontrol Semua (All Controls) -->
        <div class="all-controls-wrapper">
            <section class="all-lights-control">
                <div class="section-title">
                    <span class="title-icon">ğŸ’¡</span>
                    <span>Kontrol Lampu Semua Ruangan</span>
                </div>
                <div class="all-control-content">
                    <p class="control-note">Tombol "Matikan Semua" hanya aktif saat rumah kosong</p>
                    <button class="btn-all-control danger" id="turnOffAllLights" onclick="turnOffAllLights()">
                        <span class="btn-icon">ğŸ’¡</span>
                        Matikan Semua
                    </button>
                </div>
            </section>

            <section class="all-devices-control">
                <div class="section-title">
                    <span class="title-icon">âš™ï¸</span>
                    <span>Kontrol Semua Perangkat</span>
                </div>
                <div class="all-control-content">
                    <p class="control-note">Matikan perangkat yang tidak digunakan</p>
                    <button class="btn-all-control danger" id="turnOffAllDevices" onclick="turnOffAllDevices()">
                        <span class="btn-icon">âš™ï¸</span>
                        Matikan Semua
                    </button>
                </div>
            </section>
        </div>

        <!-- Kontrol Ruangan -->
        <section class="rooms-section">
            <div class="section-title">
                <span class="title-icon">ğŸšª</span>
                <span>Ruangan</span>
            </div>
            <div class="rooms-grid" id="roomsGrid">
                <!-- Dinamis -->
            </div>
        </section>

        <!-- Kontrol Perangkat -->
        <section class="devices-section">
            <div class="section-title">
                <span class="title-icon">ğŸ”§</span>
                <span>Kontrol Perangkat</span>
            </div>
            <div class="devices-grid" id="devicesGrid">
                <!-- Dinamis -->
            </div>
        </section>

        <!-- Activity Log -->
        <section class="logs-section">
            <div class="section-title">
                <span class="title-icon">ğŸ“‹</span>
                <span>LOG Aktivitas</span>
            </div>
            <div class="logs-container" id="logsContainer">
                <div class="logs-content">
                    <div class="log-item empty">
                        <span>Tidak ada aktivitas</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- System Info -->
        <section class="system-info">
            <div class="section-title">
                <span class="title-icon">â„¹ï¸</span>
                <span>Informasi Sistem</span>
            </div>
            <div class="system-grid">
                <div class="info-card">
                    <span class="info-label">Total Lampu</span>
                    <span class="info-value">5 Unit</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Perangkat Terkontrol</span>
                    <span class="info-value">3 Unit</span>
                </div>
                <div class="info-card">
                    <span class="info-label">Status Sistem</span>
                    <!-- Add MQTT connection status indicator -->
                    <span class="info-value online" id="mqttStatus">Online</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Audio elements for notifications -->
    <audio id="lightBeep" preload="auto">
        <source src="data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YQIAAAAAAA==" type="audio/wav">
    </audio>
    <audio id="deviceBeep" preload="auto">
        <source src="data:audio/wav;base64,UklGRiYAAABXQVZFZm10IBAAAAABAAEAQB8AAAB9AAACABAAZGF0YQIAAAAAAA==" type="audio/wav">
    </audio>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
